<div id="calendar-container">
  <div id="calendar">
    <div id="calendar-headline">
      <div class="calendar-headline-month">
        {{ firstDayOfActiveMonth().monthShort }},
        {{ firstDayOfActiveMonth().year }}
      </div>
      <div id="calendar-headline-controls">
        <div class="calendar-headline-control" (click)="goToPreviousMonth()">
          «
        </div>
        <div class="calendar-headline-control" id="calendar-headline-control-today" (click)="goToToday()">
          Today
        </div>
        <div class="calendar-headline-control" (click)="goToNextMonth()">»</div>
      </div>
    </div>
    <div class="calendar-weeks-grid">
      @for (weekDay of weekDays(); track $index) {
        <div class="calendar-weeks-grid-cell">{{ weekDay }}</div>
      }
    </div>
    <div id="calendar-grid">
      @for (dayOfMonth of daysOfMonth(); track $index) {
        <div
          [ngClass]="{
            'calendar-grid-cell': true,
            'calendar-grid-cell-active': activeDay()?.toISODate() === dayOfMonth.toISODate(),
            'calendar-grid-cell-inactive': dayOfMonth.month !== firstDayOfActiveMonth().month,
            'calendar-grid-cell-today': dayOfMonth.toISODate() === today().toISODate()
          }"
          (click)="viewTimeSlotsForSelectedDay(dayOfMonth)"
        >
          {{ dayOfMonth.day }}
        </div>
      }
    </div>
  </div>
  <div class="schedule">
    <div class="schedule-headline">
      @if (activeDay(); as activeDay) {
        <div>{{ activeDay.toLocaleString(DATE_MED) }}</div>
      } @else {
        <div>Please select a day</div>
      }
    </div>
    <div>
      @if (activeDay() && activeDayMeetings().length === 0) {
        <div>No Planned Meetings today</div>
      }

      @if (activeDay() && activeDayMeetings().length > 0) {
        @for (meeting of activeDayMeetings(); track $index) {
          <div>{{ meeting }}</div>
        }
      }
    </div>
  </div>

  <div id="time-slots">
    @for (slot of availableSlots(); track $index) {
      <div class="time-slot-item" (click)="addBusyTimeSlot(slot)">{{ slot.start.hour }}:{{ slot.start.minute }} - {{ slot.end.hour }}:{{ slot.end.minute }}</div>
    }
  </div>
</div>
